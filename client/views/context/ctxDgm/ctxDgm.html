<template name="ctxDgm">
    <!--{{> topPanel}}-->
    <div class="page">
        <div class="content">

            <div class="col col-md-{{boxWidth}}">
                <div class="panel panel-info">
                    <div class="panel-heading">
                        Context Diagram
                        <div class="pull-right" style="margin-top: -5px">
                            <a id="starBtnID" href="#" class="padded"><i class="fa fa-{{star}} fa-2x"></i><span class="badge">{{starCnt}}</span></a>
                            <a id="boxWidthBtnID" href="#" title="Toggle width"><i class="fa fa-chevron-circle-{{boxArrow}} fa-2x"></i></a>
                        </div>
                    </div>
                    <div class="panel-body">
                        <form class="form-horizontal">
                            <div class="form-group">
                                <label for="titleID" class="col-sm-1 control-label">Title</label>
                                <div class="col-sm-11">
                                    <input type="text" class="form-control" id="titleID" placeholder="My Title" value="{{title}}">
                                </div>
                            </div>
                            <div class="form-group">
                                <div class="col-sm-12">
                                    <label for="codeID" class="control-label">Lines
                                    <a id="lines-help">
                                        <i class="fa fa-question-circle"></i>
                                    </a>
                                    </label>
                                    <textarea id="codeID" class="form-control" rows="3">{{code}}</textarea>
                                </div>
                            </div>
                            <div class="form-group">
                                <div class="col-sm-12">
                                    <div class="checkbox">
                                        <label>
                                            <input id="privateID" type="checkbox"> Mark as private.  But you can still share with friends.
                                        </label>
                                    </div>
                                </div>
                            </div>

                            {{> tagsEdit colLabelSize="2" colFieldSize="10" tags=this.tags options=options}}

                            <div class="form-group">
                                <div class="col col-sm-12">
                                    <button type="button" class="btn btn-primary disabled" id="redrawBtnID">Redraw</button>
                                    <button type="button" class="btn btn-primary" id="saveBtnID"> Save </button>
                                    <a class="btn btn-primary" href="/view/{{_id}}">Cancel</a>
                                    <div class="btn-group">
                                        <button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown" aria-expanded="false">
                                            Action <span class="caret"></span>
                                        </button>
                                        <ul class="dropdown-menu" role="menu">
                                            <li><a id="shareBtnID" href="#"><i class="fa fa-share-square-o"></i> Share diagram</a></li>
                                            <li><a id="copyBtnID" href="#"><i class="fa fa-files-o"></i> Copy to new diagram</a></li>
                                            <li><a id="infoBtnID" href="#"><i class="fa fa-info-circle"></i> Show info</a></li>
                                            <li role="presentation" class="divider"></li>
                                            <li><a id="deleteBtnID" href="#"><i class="fa fa-trash"></i> <span class="text-danger"> Delete</span></a></li>
                                        </ul>
                                    </div>
                                </div>
                            </div>
                            <div class="form-group">
                                <div class="col-sm-12">
                                    <label for="legendID" class="control-label">Nodes</label>
                                    <table id="legendID" class="table table-striped table-condensed table-bordered">
                                        <tbody>
                                        {{#each legend}}
                                            <tr>
                                                <th scope="row">{{name}}</th>
                                                <td>{{ref}}</td>
                                            </tr>
                                        {{/each}}
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </form>
                    </div>
                </div>

                {{> ctxDgmInfo}}

            </div>

            <div id="context-div" class="col col-md-{{diagramWidth}}">
                {{>_ctxDgm}}
            </div>
        </div>
    </div>
</template>

